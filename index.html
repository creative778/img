<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Bangla Text Image Generator PRO</title>
<link href="https://fonts.googleapis.com/css2?family=Rubik+Moonrocks&family=Noto+Sans+Bengali:wght@400;700;900&family=Poppins:wght@300;400;500;600;700&family=Montserrat:wght@400;500;600;700&display=swap" rel="stylesheet">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
<!-- Google Fonts for Bengali -->
<link href="https://fonts.googleapis.com/css2?family=Hind+Siliguri:wght@400;500;600;700&family=Kalpurush&family=SolaimanLipi&family=Noto+Serif+Bengali:wght@400;700&display=swap" rel="stylesheet">
<style>
  *{margin:0;padding:0;box-sizing:border-box;}
  html,body{height:100%;}
  body{
    font-family:'Poppins',Arial,sans-serif;
    background: linear-gradient(135deg, #0f0c29 0%, #302b63 50%, #24243e 100%);
    min-height:100vh;
    display:flex;
    flex-direction:column;
    padding:1rem;
    color:#fff;
  }
  .container{
    background: rgba(255, 255, 255, 0.05);
    backdrop-filter: blur(15px);
    border-radius:25px;
    border:1px solid rgba(255,255,255,0.12);
    box-shadow:0 30px 80px rgba(0,0,0,0.6);
    padding:2.5rem;
    max-width:1200px;
    width:100%;
    margin:auto;
    position:relative;
    overflow:hidden;
  }
  .container::before{
    content:'';
    position:absolute;
    top:0;
    left:0;
    right:0;
    height:6px;
    background:linear-gradient(90deg, #667eea, #764ba2, #f093fb, #f5576c);
    border-radius:25px 25px 0 0;
    z-index:10;
  }
  .main-content{
    position:relative;
    z-index:1;
  }
  h1{
    font-family:'Montserrat','Noto Sans Bengali',sans-serif;
    font-size:3rem;
    text-align:center;
    background:linear-gradient(45deg, #667eea, #f093fb, #f5576c);
    -webkit-background-clip:text;
    -webkit-text-fill-color:transparent;
    background-clip:text;
    margin-bottom:.5rem;
    font-weight:800;
    text-shadow:0 4px 20px rgba(0,0,0,0.3);
    letter-spacing:-0.5px;
  }
  .subtitle{
    text-align:center;
    color:#c0c0ff;
    margin-bottom:3rem;
    font-size:1.2rem;
    font-weight:300;
    max-width:900px;
    margin-left:auto;
    margin-right:auto;
    line-height:1.7;
    background:rgba(255,255,255,0.05);
    padding:1.2rem;
    border-radius:12px;
    border-left:4px solid #667eea;
  }
  .form-grid{
    display:grid;
    grid-template-columns:1fr 1fr;
    gap:3rem;
    margin-bottom:3rem;
  }
  .left-panel,.right-panel{
    display:flex;
    flex-direction:column;
    gap:2rem;
  }
  .form-group{
    background:linear-gradient(145deg, rgba(255,255,255,0.08), rgba(255,255,255,0.04));
    border-radius:16px;
    padding:2rem;
    border:1px solid rgba(255,255,255,0.12);
    transition:all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
    box-shadow:0 8px 32px rgba(0,0,0,0.1);
  }
  .form-group:hover{
    background:linear-gradient(145deg, rgba(255,255,255,0.12), rgba(255,255,255,0.06));
    border-color:rgba(102,126,234,0.5);
    transform:translateY(-4px);
    box-shadow:0 12px 40px rgba(102,126,234,0.15);
  }
  label{
    font-weight:600;
    font-size:1.1rem;
    color:#e0e0ff;
    margin-bottom:1rem;
    display:flex;
    align-items:center;
    gap:.7rem;
    font-family:'Montserrat',sans-serif;
  }
  label i{
    color:#667eea;
    font-size:1.2rem;
  }
  textarea,input[type=text],input[type=number],select{
    width:100%;
    padding:1.2rem 1.5rem;
    background:rgba(0,0,0,0.25);
    border:2px solid rgba(255,255,255,0.15);
    border-radius:10px;
    font-size:1.05rem;
    color:#fff;
    transition:all 0.3s;
    font-family:'Noto Sans Bengali','Hind Siliguri',sans-serif;
  }
  textarea{
    resize:vertical;
    min-height:140px;
    line-height:1.7;
    font-size:1.1rem;
  }
  textarea:focus,input:focus,select:focus{
    outline:none;
    border-color:#667eea;
    box-shadow:0 0 0 3px rgba(102,126,234,0.25);
    background:rgba(0,0,0,0.35);
  }
  .templates-grid{
    display:grid;
    grid-template-columns:repeat(3, 1fr);
    gap:1.2rem;
  }
  .template-card{
    padding:1.2rem;
    background:rgba(255,255,255,0.08);
    border:2px solid rgba(255,255,255,0.15);
    border-radius:12px;
    cursor:pointer;
    transition:all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
    display:flex;
    flex-direction:column;
    gap:.7rem;
  }
  .template-card:hover{
    border-color:#667eea;
    background:rgba(102,126,234,0.15);
    transform:translateY(-5px) scale(1.02);
    box-shadow:0 10px 25px rgba(102,126,234,0.3);
  }
  .template-card.active{
    border-color:#667eea;
    background:linear-gradient(135deg, rgba(102,126,234,0.25), rgba(118,75,162,0.25));
    box-shadow:0 8px 25px rgba(102,126,234,0.4);
    transform:translateY(-2px);
  }
  .template-name{
    font-weight:700;
    font-size:1rem;
    color:#fff;
    font-family:'Montserrat',sans-serif;
  }
  .template-desc{
    font-size:.85rem;
    color:#b0b0ff;
    line-height:1.4;
  }
  .color-group{
    display:grid;
    grid-template-columns:1fr auto;
    gap:1.2rem;
    align-items:center;
  }
  .color-picker{
    width:65px;
    height:55px;
    border:3px solid rgba(255,255,255,0.2);
    border-radius:10px;
    cursor:pointer;
    background:#000;
    transition:all 0.3s;
  }
  .color-picker:hover{
    border-color:#667eea;
    transform:scale(1.05);
  }
  .font-size-control{
    display:grid;
    grid-template-columns:1fr 80px;
    gap:1.2rem;
    align-items:center;
  }
  input[type=range]{
    width:100%;
    height:10px;
    background:rgba(255,255,255,0.15);
    border-radius:8px;
    outline:none;
    -webkit-appearance:none;
  }
  input[type=range]::-webkit-slider-thumb{
    -webkit-appearance:none;
    width:26px;
    height:26px;
    background:linear-gradient(135deg, #667eea, #764ba2);
    border-radius:50%;
    cursor:pointer;
    border:3px solid #fff;
    box-shadow:0 4px 10px rgba(0,0,0,0.4);
    transition:all 0.3s;
  }
  input[type=range]::-webkit-slider-thumb:hover{
    transform:scale(1.15);
  }
  .size-display{
    background:linear-gradient(135deg, rgba(102,126,234,0.25), rgba(118,75,162,0.25));
    color:#fff;
    font-weight:700;
    padding:1rem;
    border-radius:10px;
    text-align:center;
    font-family:'Montserrat',sans-serif;
    border:1px solid rgba(255,255,255,0.1);
  }
  .watermark-section,.advanced-section{
    background:linear-gradient(145deg, rgba(0,0,0,0.25), rgba(0,0,0,0.15));
    padding:1.8rem;
    border-radius:14px;
    border:2px solid rgba(255,255,255,0.1);
    margin-bottom:1.2rem;
  }
  .watermark-section h3,.advanced-section h3{
    font-size:1.3rem;
    color:#fff;
    margin-bottom:1.2rem;
    display:flex;
    align-items:center;
    gap:.7rem;
    font-family:'Montserrat',sans-serif;
  }
  .watermark-inputs,.watermark-input-group{
    display:flex;
    flex-direction:column;
    gap:1rem;
  }
  .feature-toggle{
    display:flex;
    justify-content:space-between;
    align-items:center;
    padding:1.2rem;
    background:rgba(255,255,255,0.05);
    border-radius:10px;
    margin-bottom:1.2rem;
    cursor:pointer;
    transition:all 0.3s;
    border:1px solid rgba(255,255,255,0.08);
  }
  .feature-toggle:hover{
    background:rgba(255,255,255,0.08);
    border-color:rgba(102,126,234,0.3);
  }
  .toggle-switch{
    position:relative;
    width:58px;
    height:32px;
    background:#555;
    border-radius:16px;
    transition:background .3s cubic-bezier(0.4, 0, 0.2, 1);
  }
  .toggle-switch.active{
    background:#4CAF50;
    background:linear-gradient(135deg, #4CAF50, #45a049);
  }
  .toggle-slider{
    position:absolute;
    top:3px;
    left:3px;
    width:26px;
    height:26px;
    background:#fff;
    border-radius:50%;
    transition:left .3s cubic-bezier(0.4, 0, 0.2, 1);
    box-shadow:0 3px 6px rgba(0,0,0,0.25);
  }
  .toggle-switch.active .toggle-slider{
    left:29px;
  }
  .button-group{
    display:grid;
    grid-template-columns:repeat(4, 1fr);
    gap:1.2rem;
    margin-top:3rem;
  }
  button{
    padding:1.3rem;
    font-size:1.05rem;
    border:none;
    border-radius:12px;
    cursor:pointer;
    transition:all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
    font-weight:700;
    display:flex;
    align-items:center;
    justify-content:center;
    gap:.8rem;
    font-family:'Montserrat',sans-serif;
    text-transform:uppercase;
    letter-spacing:.7px;
  }
  #generateBtn{
    background:linear-gradient(135deg,#667eea 0%,#764ba2 50%,#f093fb 100%);
    color:#fff;
    grid-column:1/5;
    font-size:1.2rem;
    padding:1.5rem;
  }
  #generateBtn:hover{
    transform:translateY(-5px);
    box-shadow:0 20px 40px rgba(102,126,234,0.4);
    background:linear-gradient(135deg,#764ba2 0%,#667eea 50%,#f093fb 100%);
  }
  #downloadBtn,#copyBtn,#resetBtn,#shareBtn{
    display:none;
  }
  #downloadBtn{
    background:linear-gradient(135deg,#4CAF50 0%,#45a049 50%,#2E7D32 100%);
    color:#fff;
  }
  #downloadBtn:hover{
    background:linear-gradient(135deg,#45a049 0%,#2E7D32 50%,#1B5E20 100%);
    transform:translateY(-3px);
    box-shadow:0 10px 25px rgba(76,175,80,0.3);
  }
  #copyBtn{
    background:linear-gradient(135deg,#2196F3 0%,#0b7dda 50%,#1565C0 100%);
    color:#fff;
  }
  #copyBtn:hover{
    background:linear-gradient(135deg,#0b7dda 0%,#1565C0 50%,#0D47A1 100%);
    transform:translateY(-3px);
    box-shadow:0 10px 25px rgba(33,150,243,0.3);
  }
  #resetBtn{
    background:linear-gradient(135deg,#f44336 0%,#da190b 50%,#B71C1C 100%);
    color:#fff;
  }
  #resetBtn:hover{
    background:linear-gradient(135deg,#da190b 0%,#B71C1C 50%,#7F0000 100%);
    transform:translateY(-3px);
    box-shadow:0 10px 25px rgba(244,67,54,0.3);
  }
  #shareBtn{
    background:linear-gradient(135deg,#ff9800 0%,#f57c00 50%,#EF6C00 100%);
    color:#fff;
  }
  #shareBtn:hover{
    background:linear-gradient(135deg,#f57c00 0%,#EF6C00 50%,#E65100 100%);
    transform:translateY(-3px);
    box-shadow:0 10px 25px rgba(255,152,0,0.3);
  }
  #status{
    margin-top:2rem;
    padding:1.3rem;
    border-radius:12px;
    font-size:1.05rem;
    display:none;
    animation:fadeIn 0.3s ease;
    backdrop-filter:blur(10px);
  }
  @keyframes fadeIn{
    from{opacity:0;transform:translateY(-10px);}
    to{opacity:1;transform:translateY(0);}
  }
  #status.show{
    display:block;
  }
  #status.success{
    background:rgba(76,175,80,0.2);
    color:#C8E6C9;
    border:2px solid rgba(76,175,80,0.4);
  }
  #status.error{
    background:rgba(244,67,54,0.2);
    color:#FFCDD2;
    border:2px solid rgba(244,67,54,0.4);
  }
  #status.loading{
    background:rgba(33,150,243,0.2);
    color:#BBDEFB;
    border:2px solid rgba(33,150,243,0.4);
  }
  .preview-section{
    margin-top:3rem;
    padding:2.5rem;
    background:linear-gradient(145deg, rgba(0,0,0,0.35), rgba(0,0,0,0.25));
    border-radius:18px;
    display:none;
    border:2px solid rgba(255,255,255,0.15);
    backdrop-filter:blur(10px);
  }
  .preview-section.active{
    display:block;
    animation:fadeIn 0.5s ease;
  }
  .preview-section h3{
    text-align:center;
    margin-bottom:2rem;
    color:#fff;
    font-size:1.8rem;
    font-weight:700;
    font-family:'Montserrat',sans-serif;
    display:flex;
    align-items:center;
    justify-content:center;
    gap:1rem;
  }
  #outputCanvas{
    max-width:900px;
    width:100%;
    border:4px solid rgba(255,255,255,0.15);
    border-radius:15px;
    box-shadow:0 20px 50px rgba(0,0,0,0.7);
    display:block;
    margin:auto;
    background:#fff;
  }
  .canvas-container{
    position:relative;
    overflow:hidden;
    border-radius:15px;
  }
  .quality-badge{
    position:absolute;
    top:15px;
    right:15px;
    background:linear-gradient(135deg, rgba(76,175,80,0.95), rgba(46,125,50,0.95));
    color:#fff;
    padding:.7rem 1.5rem;
    border-radius:25px;
    font-size:1rem;
    font-weight:700;
    z-index:10;
    display:none;
    box-shadow:0 5px 15px rgba(0,0,0,0.3);
    font-family:'Montserrat',sans-serif;
    letter-spacing:.5px;
  }
  footer{
    background:linear-gradient(145deg, rgba(0,0,0,0.5), rgba(0,0,0,0.3));
    color:#c0c0ff;
    text-align:center;
    padding:3rem;
    margin-top:4rem;
    border-top:2px solid rgba(255,255,255,0.15);
    border-radius:0 0 25px 25px;
    backdrop-filter:blur(10px);
  }
  footer p{
    margin-bottom:1.5rem;
    line-height:1.8;
    font-size:1.1rem;
  }
  footer strong{
    color:#667eea;
    font-weight:700;
    text-shadow:0 2px 4px rgba(0,0,0,0.3);
  }
  footer a{
    color:#ffeb3b;
    text-decoration:none;
    transition:all 0.3s;
    font-weight:600;
    border-bottom:2px solid transparent;
  }
  footer a:hover{
    color:#fff;
    border-bottom:2px solid #667eea;
  }
  .social-links{
    display:flex;
    justify-content:center;
    gap:2rem;
    margin-top:2rem;
  }
  .social-links a{
    color:#fff;
    font-size:1.8rem;
    transition:all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
    width:55px;
    height:55px;
    display:flex;
    align-items:center;
    justify-content:center;
    border-radius:50%;
    background:rgba(255,255,255,0.1);
  }
  .social-links a:hover{
    color:#667eea;
    transform:translateY(-5px) scale(1.1);
    background:rgba(102,126,234,0.2);
    box-shadow:0 10px 25px rgba(102,126,234,0.3);
  }
  @media (max-width:1024px){
    .form-grid{grid-template-columns:1fr;}
    .templates-grid{grid-template-columns:repeat(2,1fr);}
    .button-group{grid-template-columns:repeat(2,1fr);}
    #generateBtn{grid-column:1/3;}
    h1{font-size:2.5rem;}
    .container{padding:2rem;}
  }
  @media (max-width:768px){
    .templates-grid{grid-template-columns:1fr;}
    .button-group{grid-template-columns:1fr;}
    #generateBtn{grid-column:1;}
    h1{font-size:2rem;}
    body{padding:.7rem;}
    .form-group{padding:1.5rem;}
    .preview-section{padding:1.5rem;}
  }
  .loader{
    border:4px solid rgba(255,255,255,0.15);
    border-top:4px solid #667eea;
    border-radius:50%;
    width:30px;
    height:30px;
    animation:spin 1s linear infinite;
    display:inline-block;
    margin-right:12px;
  }
  @keyframes spin{
    0%{transform:rotate(0deg);}
    100%{transform:rotate(360deg);}
  }
  .tooltip{
    position:relative;
    display:inline-block;
    margin-left:8px;
  }
  .tooltip .tooltiptext{
    visibility:hidden;
    width:220px;
    background:rgba(0,0,0,0.95);
    color:#fff;
    text-align:center;
    border-radius:10px;
    padding:12px;
    position:absolute;
    z-index:100;
    bottom:125%;
    left:50%;
    transform:translateX(-50%);
    opacity:0;
    transition:opacity 0.3s;
    font-size:.95rem;
    font-weight:normal;
    border:1px solid rgba(255,255,255,0.15);
    box-shadow:0 10px 25px rgba(0,0,0,0.5);
    backdrop-filter:blur(10px);
  }
  .tooltip:hover .tooltiptext{
    visibility:visible;
    opacity:1;
  }
  .feature-grid{
    display:grid;
    grid-template-columns:repeat(2,1fr);
    gap:1.2rem;
  }
  .font-dropdown{
    width:100%;
    padding:1.2rem;
    background:rgba(0,0,0,0.3);
    border:2px solid rgba(255,255,255,0.15);
    border-radius:10px;
    color:#fff;
    font-size:1.05rem;
    font-family:'Poppins',sans-serif;
    cursor:pointer;
  }
  .font-preview{
    margin-top:.8rem;
    padding:.8rem;
    background:rgba(255,255,255,0.08);
    border-radius:8px;
    font-size:1.2rem;
    min-height:50px;
    display:flex;
    align-items:center;
    justify-content:center;
    text-align:center;
    border:1px solid rgba(255,255,255,0.1);
    color:#fff;
  }
  .image-watermark-controls{
    display:grid;
    grid-template-columns:1fr 1fr;
    gap:1.5rem;
    margin-top:1.5rem;
  }
  .control-group{
    display:flex;
    flex-direction:column;
    gap:.8rem;
  }
  .control-group label{
    font-size:.95rem;
    margin-bottom:0;
  }
  .file-upload{
    position:relative;
    overflow:hidden;
    margin-bottom:1.5rem;
  }
  .file-upload input[type=file]{
    position:absolute;
    top:0;
    right:0;
    margin:0;
    padding:0;
    font-size:20px;
    cursor:pointer;
    opacity:0;
    filter:alpha(opacity=0);
  }
  .upload-label{
    display:block;
    padding:1.2rem;
    background:rgba(102,126,234,0.2);
    border:2px dashed rgba(102,126,234,0.5);
    border-radius:10px;
    text-align:center;
    color:#b0b0ff;
    cursor:pointer;
    transition:all 0.3s;
  }
  .upload-label:hover{
    background:rgba(102,126,234,0.3);
    border-color:#667eea;
    color:#fff;
  }
  .upload-label i{
    margin-right:.5rem;
    color:#667eea;
  }
  .file-name{
    margin-top:.5rem;
    font-size:.9rem;
    color:#b0b0ff;
    text-align:center;
  }
  .stats-panel{
    display:flex;
    justify-content:space-between;
    background:rgba(0,0,0,0.2);
    padding:1rem 1.5rem;
    border-radius:10px;
    margin-top:1.5rem;
    border:1px solid rgba(255,255,255,0.1);
  }
  .stat-item{
    text-align:center;
  }
  .stat-value{
    font-size:1.5rem;
    font-weight:700;
    color:#667eea;
    font-family:'Montserrat',sans-serif;
  }
  .stat-label{
    font-size:.85rem;
    color:#b0b0ff;
    margin-top:.3rem;
  }
</style>
</head>

<body>

<div class="container">
  <div class="main-content">
    <h1>‚ú® Bangla Text Image Generator PRO</h1>
    <p class="subtitle">Create stunning, professional-quality images with Bangla text for social media, marketing, and personal use. High-resolution output with advanced customization options.</p>

    <form id="textForm">
      <div class="form-grid">
        <!-- LEFT PANEL -->
div class="left-panel">
          <!-- Textdiv class="form-group">
            <label for="textInput"><i class="fasi> Enter Your Bangla Text:</label>
textarea id="textInput" placeholder="Example: ‡¶Ü‡¶Æ‡¶æ‡¶∞ ‡¶¨‡¶æ‡¶Ç‡¶≤‡¶æ ‡¶Ü‡¶Æ‡¶æ‡¶∞ ‡¶ó‡¶∞‡ßç‡¶¨, ‡¶Ü‡¶Æ‡¶æ‡¶∞ ‡¶¶‡ßá‡¶∂ ‡¶¨‡¶æ‡¶Ç‡¶≤‡¶æ‡¶¶‡ßá‡¶∂" required></textarea>
          </div>

          <!-- Font Style Settings -->
          <div class="form-group">
            <label for="fontStyle"><i class="fasi>label>
select id="fontStyle" class="font-dropdown">
option value="Noto Sans Bengali">Noto Sans Bengali (Default)</option>
option value="Hind Siliguri">Hind Siliguri</option>
option value="Kalpurush">Kalpurush</option>
              <option value="SolaimanLipi">Solaiman Lipi</option>
              <option value="Noto Serif Bengali">Noto Serif Bengali</option>
              <option value="Arial">Arial</option>
option value="Georgiaoption>
              <option value="'Times New Roman'">Times New Roman</option>
            </select>
            <div id="fontPreview" class="font-preview">‡¶´‡¶®‡ßç‡¶ü ‡¶™‡ßç‡¶∞‡¶ø‡¶≠‡¶ø‡¶â ‡¶¶‡ßá‡¶ñ‡ßÅ‡¶®</div>
          </div>

          <!-- Templatediv class="formlabel><i class="fas fa-palette"></i> Select Template:</label>
div class="templates-grid">
              <!-- Original templatesdiv class="template-card active" data-template="facebook-blue">
                <div class="template-name">üì± Facebook Blue</div>
div class="template-desc">Professional blue background</div>
              </div>
div class="template-card" data-template="facebook-trending">
div class="template-name">üî• Trending</div>
div class="template-desc">Vibrant red gradient</div>
              </div>
div class="template-card" data-template="facebook-gradient">
                <div class="template-name">üé® Gradient</div>
                <div class="template-desc">Blue‚Äëpurple gradient</div>
              </div>
div class="template-card" data-template="facebookdiv class="template-name">üåô Dark Mode</div>
                <div class="template-desc">Elegant dark theme</div>
              </div>
div class="template-card" data-template="facebookdiv class="template-name">‚òÄdiv>
                <div class="template-desc">Clean light background</div>
              </div>
div class="template-card" data-template="facebook-quote">
div class="template-name">üí¨ Quote</div>
div class="template-desc">Classic quote style</div>
              </div>
              <!-- New templatesdiv class="template-card" data-template="modern-mindiv class="template-name">‚ö™ Modern Minimal</div>
div class="template-desc">Clean & professional</div>
              </div>
div class="template-card" data-template="neon-futuristic">
                <div class="template-name">‚ö° Neon Futuristic</div>
                <div class="template-desc">Glowing neon effects</div>
              </div>
div class="template-card" data-template="golden-elegant">
div class="template-name">üåü Golden Elegant</div>
                <div class="template-desc">Luxury gold theme</div>
              </div>
div class="template-card" data-template="naturediv class="template-name">üåø Nature Green</div>
div class="template-desc">Fresh natural colors</div>
              </div>
div class="template-card" data-template="techdiv class="template-name">üíª Tech Blue</div>
                <div class="template-desc">Technology theme</div>
              </div>
div class="template-card" data-template="vibrant-rainbow">
                <div class="template-name">üåà Vibrant Rainbow</div>
                <div class="template-desc">Colorful gradient</div>
              </div>
            </div>
          </div>

          <!-- Text Watermark Settingsdiv class="watermark-section">
            <hi class="fasi> Text Watermark Settings</h3>
div class="watermark-inputs">
              <div class="watermark-inputlabel for="watermarkTopLeft">üîù Top‚Äëleftlabel>
input type="text" id="watermarkTopLeft" placeholder="e.g. ¬© ARS" value="ARS">
              </div>
              <div class="watermark-input-group">
                <label for="watermarkBottomRight">üîª Bottom‚Äëright Waterlabel>
input type="text" id="watermarkBottomRight" placeholder="e.g. Abdur Rahman" value="Abdur Rahman Sheikh">
              </div>
            </div>
div>

          <!-- Image Watermark Uploaddiv class="watermark-section">
            <hi class="fas fa-image"></i> Image Watermark (Optional)</h3>
            <div class="file-upload">
input type="file" id="imageWatermark" accept="image/*">
              <label for="imageWatermark" class="upload-label">
                <i class="fas fa-cloud-upload-alt"></i> Click to upload watermark image
              </label>
              <div id="fileName" class="file-name">No file selected</div>
            </divdiv class="image-watermark-controldiv class="controllabel for="imageWatermarkSize"><i class="fas fa-expand-alt"></i> Watermark Size:</label>
                <div class="font-size-control">
                  <input type="range" id="imageWatermarkSize" min="10" max="50" value="30">
                  <span class="size-display" id="imageWatermarkSizeDisplay">30%</span>
div>
              </div>
div class="control-group">
label for="wmOpacity"><i class="fas fa-tint"></i> Watermark Opacity:</label>
div class="font-size-control">
                  <input type="range" id="wmOpacity" min="10" max="100" value="40">
                  <span class="size-display" id="wmOpacityDisplay">40%</spandiv>
              </div>
            </divsmall style="color:#b0b0d0;font-size:.9rem;display:block;margin-top:1.5rem;padding:.8rem;background:rgba(0,0,0,0.2);border-radius:8px;border-left:3px solid #667eea;">
              <i class="fas fa-info-circle"></i> The watermark image will be placed behind text and automatically resized to not interfere with your content. Text always has priority.
            </small>
          </div>
        </div>

        <!-- RIGHT PANEL -->
div class="right-panel">
          <!-- Colour Customisationdiv class="form-group">
            <label><i class="fas fa-swati> Colour Customisation</label>
            <div class="color-group">
              <label style="font-size:.95rem;color:#c0c0ff;">Background colour:</label>
              <input type="color" id="bgColor" class="color-picker" value="#1877f2">
            </div>
div class="color-group" style="margin-top:1.2rem;">
              <label style="font-size:.95rem;color:#c0c0ff;">label>
input type="color" id="textColor" class="color-picker" value="#ffffff">
            </div>
            <div class="color-group" style="margin-top:1.2rem;">
              <label style="font-size:.95rem;color:#c0c0ff;">Watermark Colour:</label>
              <input type="color" id="watermarkColor" class="color-picker" value="#ff5722">
            </div>
div>

          <!-- Font Size & Weight -->
          <div class="form-group">
            <label for="fontSize"><i class="fas fa-text-height"></ilabel>
div class="font-size-control">
              <input type="range" id="fontSize" min="24" max="120" value="48">
              <span class="size-display" id="sizeDisplay">48px</span>
            </div>
          </div>

div class="formlabel for="fontWeight"><i class="fas fa-bold"></i> Font Weight:</label>
div class="font-size-control">
              <input type="range" id="fontWeight" min="100" max="900" value="700" step="100">
              <span class="size-display" id="weightDisplay">Bspan>
            </div>
          </div>

          <!-- Advanceddiv class="advancedi class="fas fa-cogs"></ih3>
div class="feature-toggle">
              <span>Border Effect</span>
div class="toggle-switch active" data-feature="border">
div class="togglediv>
              </div>
            </div>
div class="featurespan>Shadow Effect</span>
              <div class="toggle-switch active" data-feature="shadow">
                <div class="toggle-sldiv>
              </div>
            </div>
div class="featurespan>Background Pattern</span>
              <div class="toggle-switch" data-feature="div class="togglediv>
              </div>
            </div>
div class="featurespan>Centerdiv class="toggle-switch active" data-feature="centered">
                <div class="div>
              </div>
            </div>
div class="feature-toggle">
              <span>Text Outline</span>
              <div class="toggle-switch" data-feature="outline">
                <div class="toggle-sldiv>
              </div>
            </div>
div class="feature-toggle">
              <span>Text Gradient</span>
              <div class="toggle-switch" data-feature="textGradient">
                <div class="div>
              </div>
            </div>
div class="featurespan>Rspan>
              <div class="toggle-switch" data-feature="roundCorners">
                <div class="div>
              </div>
            </div>
div class="featurespan>High Quality Mode</span>
              <div class="toggle-switch active" data-feature="highdiv class="togglediv>
              </div>
            </div>
          </div>

          <!-- Imagediv class="form-group">
            <label for="imageDimension"><i class="fasi> Image Dimensions</label>
            <select id="imageDimension" class="font-dropdown">
              <optgroup label="Facebook">
option value="1200x628">Feed Post (1200‚ÄØ√ó‚ÄØ628)</option>
                <option value="1080x1080">Square Post (1080‚ÄØoption>
option value="1200x1500">Portrait (1200‚ÄØ√ó‚ÄØoption>
option value="828x315">Cover Photo (828‚ÄØ√ó‚ÄØ315)</option>
                <option value="1200x1200">Stories (1200option>
              </optoptgroup label="Instagram">
option value="1080x1350">Portrait (1080‚ÄØoption>
option value="1080x1080">Square option>
                <option value="1080x566">Landscape (1080‚ÄØ√ó‚ÄØ566)</option>
                <option value="1080x1920">Stories (1080‚ÄØ√ó‚ÄØ1920)</option>
              </optoptgroup label="Twitter /option value="1200x675">Post (1200‚ÄØ√ó‚ÄØoption>
option value="1500x500">Header (1500‚ÄØ√ó‚ÄØ500)</option>
              </optoptgroup label="High Quality">
                <option value="1920x1080">HD (1920‚ÄØ√ó‚ÄØoption>
                <option value="2560x1440">2K (2560‚ÄØ√ó‚ÄØoption>
                <option value="3840x2160">4K (3840‚ÄØ√ó‚ÄØ2160)</option>
                <option value="4096x4096">4K Square option>
optgroup>
small style="color:#b0b0d0;font-size:.85rem;display:block;margin-top:.8rem;padding:.7rem;background:rgba(0,0,0,0.2);border-radius:8px;">
              <i class="fas fa-star"></i> Higher resolutions produce better quality but take longer to generatesmall>
          </div>

          <!-- Statsdiv class="stats-panel">
div class="statdiv class="stat-value" id="resolutionStat">1200√ó628</div>
              <div class="stat-label">Resolution</div>
            </div>
div class="stat-item">
              <div class="stat-value" id="qualityStat">4√ó</div>
div class="statdiv>
            </div>
div class="stat-item">
              <div class="stat-value" id="templateStat">1/12</div>
div class="statdiv>
            </div>
          </div>
        </div>
div>

      <!-- Butdiv class="button-group">
button type="submit" id="generateBtn"><i class="fas fa-magic"></i> Generate High-Quality Image</button>
        <button type="button" id="downloadBtn"><i class="fas fa-di> Download PNG</button>
        <button type="button" id="copyBtn"><i class="fas fa-copy"></i> Copy Image</button>
        <button type="button" id="shareBtn"><i class="fas fa-share-alt"></i> Share</button>
        <button type="button" id="resetBtn"><i class="fas fa-redo"></i>button>
      </div>
    </form>

    <!-- Status Message -->
div id="status"></div>

    <!-- Previewdiv class="preview-section" id="previewSection">
     i class="fasi> Preview</h3>
      <div class="canvas-container">
        <div class="quality-badge" id="qualityBadge">ULTRA HD 4√ó</div>
canvas id="outputCanvas"></canvas>
div>
    </div>
div>

  <footer>
    <p>Created by <strong>ARS (Abdur Rahman Sheikh)</strong> with ‚ù§Ô∏è<br>
      <small>Professional Edition ‚Ä¢ High-Quality Image Generator ‚Ä¢ Optimized for Socialbr>
      ¬© 2024 Bangla Text Image Generator PRO. Allp>
    
    <div class="social-links">
      <a href="https://github.com/your-repo" title="GitHub Source"i class="fab fa-gi></a>
      <a href="#" title="Twitter"i class="fab fa-twa>
a href="#" title="LinkedIn"i class="fab fa-linkeda>
a href="#" title="Portfolio"i class="fasa>
    </div>
    
    <p style="margin-top:2rem;font-size:.95rem;color:#a0a0e0;">
      <i class="fas fa-info-circle"></i> This tool generates high-resolution images using advanced canvas rendering techniques.
      Images are processed locally in your browser for maximum privacy.
div>

<script>
/* ====================== GLOBAL STATE ====================== */
const form = document.getElementById('textForm');
const textInput = document.getElementById('textInput');
const bgColorInput = document.getElementById('bgColor');
const textColorInput = document.getElementById('textColor');
const watermarkColorInput = document.getElementById('watermarkColor');
const fontSizeInput = document.getElementById('fontSize');
const fontWeightInput = document.getElementById('fontWeight');
const sizeDisplay = document.getElementById('sizeDisplay');
const weightDisplay = document.getElementById('weightDisplay');
const generateBtn = document.getElementById('generateBtn');
const downloadBtn = document.getElementById('downloadBtn');
const copyBtn = document.getElementById('copyBtn');
const shareBtn = document.getElementById('shareBtn');
const resetBtn = document.getElementById('resetBtn');
const canvas = document.getElementById('outputCanvas');
const status = document.getElementById('status');
const previewSection = document.getElementById('previewSection');
const qualityBadge = document.getElementById('qualityBadge');
const templateCards = document.querySelectorAll('.template-card');
const toggleSwitches = document.querySelectorAll('.toggle-switch');
const wmTopLeftInput = document.getElementById('watermarkTopLeft');
const wmBottomRightInput = document.getElementById('watermarkBottomRight');
const imageDimensionSelect = document.getElementById('imageDimension');
const imageWatermarkInput = document.getElementById('imageWatermark');
const imageWatermarkSizeInput = document.getElementById('imageWatermarkSize');
const imageWatermarkSizeDisplay = document.getElementById('imageWatermarkSizeDisplay');
const wmOpacityInput = document.getElementById('wmOpacity');
const wmOpacityDisplay = document.getElementById('wmOpacityDisplay');
const fontStyleSelect = document.getElementById('fontStyle');
const fontPreview = document.getElementById('fontPreview');
const fileName = document.getElementById('fileName');
const resolutionStat = document.getElementById('resolutionStat');
const qualityStat = document.getElementById('qualityStat');
const templateStat = document.getElementById('templateStat');

let currentTemplate = 'facebook-blue';
let features = {
  border: true,
  shadow: true,
  pattern: false,
  centered: true,
  outline: false,
  textGradient: false,
  roundCorners: false,
  highQuality: true
};
let uploadedImg = null;
let currentScaleFactor = 4;
let templateCount = 12;

/* ====================== TEMPLATE PRESETS ====================== */
const templates = {
  'facebook-blue': { bg: '#1877f2', txt: '#ffffff', fs: 48, wm: '#ffd700' },
  'facebook-trending': { bg: '#ff6b6b', txt: '#ffffff', fs: 52, wm: '#ffeb3b' },
  'facebook-gradient': { bg: '#667eea', txt: '#ffffff', fs: 48, wm: '#764ba2' },
  'facebook-dark': { bg: '#1a1a1a', txt: '#ffffff', fs: 48, wm: '#00d4ff' },
  'facebook-light': { bg: '#f5f5f5', txt: '#333333', fs: 48, wm: '#ff5722' },
  'facebook-quote': { bg: '#fff9e6', txt: '#d32f2f', fs: 52, wm: '#ff6f00' },
  'modern-minimal': { bg: '#ffffff', txt: '#222222', fs: 46, wm: '#888888' },
  'neon-futuristic': { bg: '#0f0c29', txt: '#00ffcc', fs: 54, wm: '#ff6ec7' },
  'golden-elegant': { bg: '#1a1a1a', txt: '#ffd700', fs: 50, wm: '#ff6b35' },
  'nature-green': { bg: '#2e7d32', txt: '#ffffff', fs: 48, wm: '#a5d6a7' },
  'tech-blue': { bg: '#1565c0', txt: '#e3f2fd', fs: 48, wm: '#4fc3f7' },
  'vibrant-rainbow': { bg: '#ff0080', txt: '#ffffff', fs: 52, wm: '#00ffaa' }
};

/* ====================== UI INITIALISATION ====================== */
function applyTemplate(preset) {
  bgColorInput.value = preset.bg;
  textColorInput.value = preset.txt;
  fontSizeInput.value = preset.fs;
  watermarkColorInput.value = preset.wm;
  sizeDisplay.textContent = `${preset.fs}px`;
  fontPreview.style.fontFamily = fontStyleSelect.value;
  fontPreview.style.fontSize = `${preset.fs}px`;
  updateTemplateStat();
}

function updateTemplateStat() {
  const activeIndex = Array.from(templateCards).findIndex(card => card.classList.contains('active'));
  templateStat.textContent = `${activeIndex + 1}/${templateCount}`;
}

function updateResolutionStat() {
  const [w, h] = imageDimensionSelect.value.split('x');
  resolutionStat.textContent = `${w}√ó${h}`;
}

function updateQualityStat() {
  qualityStat.textContent = features.highQuality ? '4√ó' : '2√ó';
}

applyTemplate(templates['facebook-blue']);
updateResolutionStat();
updateQualityStat();

/* ====================== EVENT LISTENERS ====================== */
// Font size live update
fontSizeInput.addEventListener('input', e => {
  sizeDisplay.textContent = `${e.target.value}px`;
  fontPreview.style.fontSize = `${e.target.value}px`;
});

// Font weight live update
fontWeightInput.addEventListener('input', e => {
  const weight = parseInt(e.target.value);
  weightDisplay.textContent = weight >= 700 ? `Bold (${weight})` : 
                              weight >= 400 ? `Normal (${weight})` : 
                              `Light (${weight})`;
  fontPreview.style.fontWeight = weight;
});

// Font style change
fontStyleSelect.addEventListener('change', e => {
  const fontValue = e.target.value;
  fontPreview.style.fontFamily = fontValue;
  fontPreview.textContent = fontValue.includes('Bengali') || 
                           fontValue.includes('Siliguri') || 
                           fontValue.includes('Kalpurush') || 
                           fontValue.includes('Solaiman') ? 
                           '‡¶´‡¶®‡ßç‡¶ü ‡¶™‡ßç‡¶∞‡¶ø‡¶≠‡¶ø‡¶â ‡¶¶‡ßá‡¶ñ‡ßÅ‡¶®' : 'Font Preview Text';
});

// Image watermark size
imageWatermarkSizeInput.addEventListener('input', e => {
  imageWatermarkSizeDisplay.textContent = `${e.target.value}%`;
});

// Image watermark opacity
wmOpacityInput.addEventListener('input', e => {
  wmOpacityDisplay.textContent = `${e.target.value}%`;
});

// Image dimension change
imageDimensionSelect.addEventListener('change', updateResolutionStat);

// Template selection
templateCards.forEach((card, index) => {
  card.addEventListener('click', e => {
    e.preventDefault();
    templateCards.forEach(c => c.classList.remove('active'));
    card.classList.add('active');
    currentTemplate = card.dataset.template;
    if (templates[currentTemplate]) {
      applyTemplate(templates[currentTemplate]);
    }
    updateTemplateStat();
  });
});

// Feature toggles
toggleSwitches.forEach(toggle => {
  toggle.addEventListener('click', () => {
    toggle.classList.toggle('active');
    const feature = toggle.dataset.feature;
    features[feature] = toggle.classList.contains('active');
    
    if (feature === 'highQuality') {
      if (features.highQuality) {
        qualityBadge.style.display = 'block';
        qualityBadge.textContent = 'ULTRA HD 4√ó';
      } else {
        qualityBadge.style.display = 'block';
        qualityBadge.textContent = 'HD 2√ó';
      }
      updateQualityStat();
    }
  });
});

// Reset button
resetBtn.addEventListener('click', () => {
  form.reset();
  templateCards.forEach(c => c.classList.remove('active'));
  document.querySelector('.template-card[data-template="facebook-blue"]').classList.add('active');
  currentTemplate = 'facebook-blue';
  applyTemplate(templates['facebook-blue']);
  
  features = {
    border: true,
    shadow: true,
    pattern: false,
    centered: true,
    outline: false,
    textGradient: false,
    roundCorners: false,
    highQuality: true
  };
  
  toggleSwitches.forEach(t => {
    if (t.dataset.feature === 'border' || t.dataset.feature === 'shadow' || 
        t.dataset.feature === 'centered' || t.dataset.feature === 'highQuality') {
      t.classList.add('active');
    } else {
      t.classList.remove('active');
    }
  });
  
  uploadedImg = null;
  fileName.textContent = 'No file selected';
  previewSection.classList.remove('active');
  downloadBtn.style.display = 'none';
  copyBtn.style.display = 'none';
  shareBtn.style.display = 'none';
  qualityBadge.style.display = 'block';
  qualityBadge.textContent = 'ULTRA HD 4√ó';
  updateQualityStat();
  showStatus('‚úÖ All settings have been reset!', 'success');
});

// Image watermark upload
imageWatermarkInput.addEventListener('change', e => {
  const file = e.target.files[0];
  if (!file) { 
    uploadedImg = null; 
    fileName.textContent = 'No file selected';
    return; 
  }
  
  if (!file.type.match('image.*')) {
    showStatus('‚ùå Please select a valid image file (PNG, JPG, GIF)', 'error');
    fileName.textContent = 'Invalid file type';
    return;
  }
  
  // Show file name
  fileName.textContent = file.name.length > 30 ? file.name.substring(0, 27) + '...' : file.name;
  
  const img = new Image();
  img.onload = () => { 
    uploadedImg = img;
    showStatus('‚úÖ Watermark image loaded successfully!', 'success');
  };
  img.onerror = () => { 
    uploadedImg = null; 
    fileName.textContent = 'Failed to load';
    showStatus('‚ùå Failed to load image. Please try another file.', 'error'); 
  };
  img.src = URL.createObjectURL(file);
});

/* ====================== STATUS HELPER ====================== */
function showStatus(msg, type = 'loading') {
  status.textContent = msg;
  status.className = `show ${type}`;
  if (type === 'success' || type === 'error') {
    setTimeout(() => status.classList.remove('show'), 4000);
  }
}

/* ====================== TEXT WRAPPING ====================== */
function wrapText(ctx, text, x, y, maxWidth, lineHeight) {
  const words = text.split(/\s+/);
  let line = '';
  const lines = [];
  
  for (let n = 0; n < words.length; n++) {
    const test = line + words[n] + ' ';
    if (ctx.measureText(test).width > maxWidth && n > 0) {
      lines.push(line.trim());
      line = words[n] + ' ';
    } else {
      line = test;
    }
  }
  lines.push(line.trim());

  const startY = features.centered ? y - ((lines.length - 1) * lineHeight / 2) : y;
  for (let i = 0; i < lines.length; i++) {
    ctx.fillText(lines[i], x, startY + i * lineHeight);
  }
  
  return lines.length;
}

/* ====================== HIGH QUALITY CANVAS SETUP ====================== */
function setupHighQualityCanvas(scaleFactor) {
  const [w, h] = imageDimensionSelect.value.split('x').map(Number);
  const scaledWidth = w * scaleFactor;
  const scaledHeight = h * scaleFactor;
  
  canvas.width = scaledWidth;
  canvas.height = scaledHeight;
  canvas.style.width = `${w}px`;
  canvas.style.height = `${h}px`;
  
  const ctx = canvas.getContext('2d', { alpha: true, desynchronized: true });
  ctx.scale(scaleFactor, scaleFactor);
  ctx.imageSmoothingEnabled = true;
  ctx.imageSmoothingQuality = features.highQuality ? 'high' : 'medium';
  ctx.textRendering = 'optimizeLegibility';
  ctx.fontKerning = 'normal';
  
  return { ctx, scaleFactor, originalWidth: w, originalHeight: h };
}

/* ====================== DRAW BACKGROUND PATTERN ====================== */
function drawPattern(ctx, width, height, scaleFactor) {
  if (!features.pattern) return;
  
  ctx.save();
  ctx.fillStyle = 'rgba(255, 255, 255, 0.03)';
  const step = 70 * scaleFactor;
  
  // Draw dots pattern
  for (let i = 0; i < width; i += step) {
    for (let j = 0; j < height; j += step) {
      ctx.beginPath();
      ctx.arc(i, j, step * 0.08, 0, Math.PI * 2);
      ctx.fill();
    }
  }
  ctx.restore();
}

/* ====================== DRAW IMAGE WATERMARK ====================== */
function drawImageWatermark(ctx, width, height, scaleFactor) {
  if (!uploadedImg) return;
  
  const watermarkSize = parseInt(imageWatermarkSizeInput.value) / 100;
  const opacity = parseInt(wmOpacityInput.value) / 100;
  const maxW = width * watermarkSize;
  const scale = Math.min(1, maxW / uploadedImg.width);
  const imgW = uploadedImg.width * scale;
  const imgH = uploadedImg.height * scale;
  const x = (width - imgW) / 2;
  const y = (height - imgH) / 2;
  
  ctx.save();
  ctx.globalAlpha = opacity;
  ctx.drawImage(uploadedImg, x, y, imgW, imgH);
  ctx.restore();
}

/* ====================== DRAW TEXT WITH EFFECTS ====================== */
function drawTextWithEffects(ctx, text, x, y, width, scaleFactor) {
  const scaledFontSize = parseInt(fontSizeInput.value) * scaleFactor;
  const fontWeight = parseInt(fontWeightInput.value);
  const fontStyle = fontStyleSelect.value;
  
  // Set font
  ctx.font = `${fontWeight} ${scaledFontSize}px '${fontStyle}', 'Noto Sans Bengali', Arial, sans-serif`;
  ctx.textAlign = 'center';
  ctx.textBaseline = 'middle';
  
  // Text gradient if enabled
  if (features.textGradient) {
    const textGrad = ctx.createLinearGradient(width * 0.2, 0, width * 0.8, 0);
    textGrad.addColorStop(0, textColorInput.value);
    textGrad.addColorStop(0.5, '#ffffff');
    textGrad.addColorStop(1, textColorInput.value);
    ctx.fillStyle = textGrad;
  } else {
    ctx.fillStyle = textColorInput.value;
  }
  
  // Text outline if enabled
  if (features.outline) {
    ctx.strokeStyle = '#000000';
    ctx.lineWidth = 3 * scaleFactor;
    ctx.lineJoin = 'round';
    ctx.strokeText(text, x, y);
  }
  
  // Calculate text position
  const centerY = features.centered ? y : y * 0.4;
  const linesCount = wrapText(ctx, text, x, centerY, width * 0.85, scaledFontSize * 1.3);
  
  return linesCount;
}

/* ====================== DRAW WATERMARKS ====================== */
function drawWatermarks(ctx, width, height, scaleFactor) {
  const wmColor = watermarkColorInput.value;
  const wmTopLeft = wmTopLeftInput.value || 'ARS';
  const wmBottomRight = wmBottomRightInput.value || 'Abdur Rahman Sheikh';
  const fontStyle = fontStyleSelect.value;
  
  ctx.fillStyle = wmColor;
  ctx.font = `bold ${28 * scaleFactor}px '${fontStyle}', 'Noto Sans Bengali', Arial, sans-serif`;
  ctx.globalAlpha = 0.85;

  // Top-left watermark - moved more inner down (80px instead of 30px)
  ctx.textAlign = 'left';
  ctx.textBaseline = 'top';
  const topLeftOffset = 80 * scaleFactor;
  ctx.fillText(wmTopLeft, topLeftOffset, topLeftOffset);

  // Bottom-right watermark - moved more inner up (80px instead of 30px)
  ctx.textAlign = 'right';
  ctx.textBaseline = 'bottom';
  const bottomRightOffset = 80 * scaleFactor;
  ctx.fillText(wmBottomRight, width - bottomRightOffset, height - bottomRightOffset);
  
  ctx.globalAlpha = 1.0;
}

/* ====================== MAIN IMAGE GENERATOR ====================== */
function generateImage(text) {
  const [w, h] = imageDimensionSelect.value.split('x').map(Number);
  
  // Calculate scale factor for high quality
  currentScaleFactor = features.highQuality ? 4 : 2;
  
  const { ctx, scaleFactor } = setupHighQualityCanvas(currentScaleFactor);
  const scaledW = w * scaleFactor;
  const scaledH = h * scaleFactor;
  
  // Clear canvas
  ctx.clearRect(0, 0, scaledW, scaledH);
  
  // ---- BACKGROUND ------------------------------------
  const bgColor = bgColorInput.value;
  const wmColor = watermarkColorInput.value;
  
  if (currentTemplate === 'facebook-gradient' || currentTemplate === 'neon-futuristic') {
    const grad = ctx.createLinearGradient(0, 0, scaledW, scaledH);
    grad.addColorStop(0, bgColor);
    grad.addColorStop(1, wmColor);
    ctx.fillStyle = grad;
  } else if (currentTemplate === 'vibrant-rainbow') {
    const grad = ctx.createLinearGradient(0, 0, scaledW, 0);
    grad.addColorStop(0, '#ff0080');
    grad.addColorStop(0.33, '#00ffaa');
    grad.addColorStop(0.66, '#0080ff');
    grad.addColorStop(1, '#ff0080');
    ctx.fillStyle = grad;
  } else {
    ctx.fillStyle = bgColor;
  }
  ctx.fillRect(0, 0, scaledW, scaledH);

  // ---- BACKGROUND PATTERN --------------------------
  drawPattern(ctx, scaledW, scaledH, scaleFactor);

  // ---- SHADOW EFFECT -------------------------------
  if (features.shadow) {
    ctx.shadowColor = 'rgba(0, 0, 0, 0.5)';
    ctx.shadowBlur = 30 * scaleFactor;
    ctx.shadowOffsetX = 10 * scaleFactor;
    ctx.shadowOffsetY = 10 * scaleFactor;
  }

  // ---- IMAGE WATERMARK (Placed FIRST, behind text) ----------------
  drawImageWatermark(ctx, scaledW, scaledH, scaleFactor);

  // ---- MAIN TEXT ---------------------------------------------------
  drawTextWithEffects(ctx, text, scaledW / 2, scaledH / 2, scaledW, scaleFactor);

  // Reset shadow for other elements
  ctx.shadowColor = 'transparent';
  ctx.shadowBlur = 0;
  ctx.shadowOffsetX = 0;
  ctx.shadowOffsetY = 0;

  // ---- BORDER EFFECT -----------------------------------------------
  if (features.border) {
    ctx.strokeStyle = textColorInput.value;
    ctx.lineWidth = 5 * scaleFactor;
    ctx.globalAlpha = 0.25;
    ctx.lineJoin = 'round';
    ctx.strokeRect(20 * scaleFactor, 20 * scaleFactor, 
                   scaledW - 40 * scaleFactor, scaledH - 40 * scaleFactor);
    ctx.globalAlpha = 1.0;
  }

  // ---- ROUND CORNERS -----------------------------------------------
  if (features.roundCorners) {
    ctx.save();
    const radius = 50 * scaleFactor;
    ctx.beginPath();
    ctx.moveTo(radius, 0);
    ctx.lineTo(scaledW - radius, 0);
    ctx.quadraticCurveTo(scaledW, 0, scaledW, radius);
    ctx.lineTo(scaledW, scaledH - radius);
    ctx.quadraticCurveTo(scaledW, scaledH, scaledW - radius, scaledH);
    ctx.lineTo(radius, scaledH);
    ctx.quadraticCurveTo(0, scaledH, 0, scaledH - radius);
    ctx.lineTo(0, radius);
    ctx.quadraticCurveTo(0, 0, radius, 0);
    ctx.closePath();
    ctx.clip();
    ctx.restore();
  }

  // ---- TEXT WATERMARKS (Positioned inside) -------------------------
  drawWatermarks(ctx, scaledW, scaledH, scaleFactor);

  // Update quality badge
  if (features.highQuality) {
    qualityBadge.textContent = currentScaleFactor === 4 ? 'ULTRA HD 4√ó' : 'HD 2√ó';
    qualityBadge.style.display = 'block';
  }
  
  // Update stats
  updateResolutionStat();
  updateQualityStat();
}

/* ====================== FORM SUBMISSION ====================== */
form.addEventListener('submit', e => {
  e.preventDefault();
  const txt = textInput.value.trim();
  
  if (!txt) {
    showStatus('‚ùå Please enter some text to generate an image.', 'error');
    textInput.focus();
    return;
  }
  
  showStatus('üîÑ Generating high-quality image... This may take a moment.', 'loading');
  generatediv class="div> Processing...';
  generateBtn.disabled = true;
  
  // Use requestAnimationFrame for better performance
  requestAnimationFrame(() => {
    try {
      generateImage(txt);
      setTimeout(() => {
        showStatus('‚úÖ High-quality image generated successfully!', 'success');
        previewSection.classList.add('active');
        downloadBtn.style.display = 'inline-flex';
        copyBtn.style.display = 'inline-flex';
        shareBtn.style.display = 'inline-flex';
        
        // Scroll to preview smoothly
        previewSection.scrollIntoView({ behavior: 'smooth', block: 'center' });
      }, 100);
    } catch (error) {
      console.error('Image generation error:', error);
      showStatus(`‚ùå Error: ${error.message}`, 'error');
    } finally {
      generatei class="fas fa-mi> Generate High-Quality Image';
      generateBtn.disabled = false;
    }
  });
});

/* ====================== DOWNLOAD FUNCTION ====================== */
downloadBtn.addEventListener('click', () => {
  try {
    const [w, h] = imageDimensionSelect.value.split('x').map(Number);
    const scale = currentScaleFactor;
    
    // Create a temporary canvas for download
    const tempCanvas = document.createElement('canvas');
    tempCanvas.width = w * scale;
    tempCanvas.height = h * scale;
    const tempCtx = tempCanvas.getContext('2d');
    
    // Draw the original canvas to temp canvas
    tempCtx.drawImage(canvas, 0, 0);
    
    const link = document.createElement('a');
    link.href = tempCanvas.toDataURL('image/png', 1.0);
    link.download = `bangla-image-${Date.now()}-${w}x${h}@${scale}x.png`;
    document.body.appendChild(link);
    link.click();
    document.body.removeChild(link);
    
    showStatus(`‚úÖ Image downloaded (${w}√ó${h} @ ${scale}x)!`, 'success');
  } catch (error) {
    console.error('Download error:', error);
    showStatus('‚ùå Failed to download image', 'error');
  }
});

/* ====================== COPY TO CLIPBOARD ====================== */
copyBtn.addEventListener('click', () => {
  canvas.toBlob(blob => {
    if (navigator.clipboard && navigator.clipboard.write) {
      navigator.clipboard.write([new ClipboardItem({ 'image/png': blob })])
        .then(() => showStatus('‚úÖ Image copied to clipboard!', 'success'))
        .catch(err => {
          console.error('Copy error:', err);
          showStatus('‚ùå Failed to copy image to clipboard', 'error');
        });
    } else {
      showStatus('‚ùå Clipboard API not supported in this browser', 'error');
    }
  }, 'image/png', 1.0);
});

/* ====================== SHARE FUNCTION ====================== */
shareBtn.addEventListener('click', () => {
  canvas.toBlob(blob => {
    const file = new File([blob], 'bangla-text-image.png', { type: 'image/png' });
    
    if (navigator.share && navigator.canShare && navigator.canShare({ files: [file] })) {
      navigator.share({
        files: [file],
        title: 'Bangla Text Image',
        text: 'Check out this image created with Bangla Text Image Generator PRO'
      })
      .then(() => showStatus('‚úÖ Image shared successfully!', 'success'))
      .catch(error => {
        if (error.name !== 'AbortError') {
          console.error('Share error:', error);
          showStatus('‚ùå Sharing failed', 'error');
        }
      });
    } else {
      // Fallback: Download
      const link = document.createElement('a');
      link.href = URL.createObjectURL(blob);
      link.download = `bangla-image-${Date.now()}.png`;
      link.click();
      showStatus('‚úÖ Image downloaded for sharing!', 'success');
    }
  }, 'image/png', 1.0);
});

/* ====================== INITIALIZE UI ====================== */
function initializeUI() {
  // Initialize font preview
  fontPreview.style.fontFamily = fontStyleSelect.value;
  fontPreview.style.fontSize = `${fontSizeInput.value}px`;
  fontPreview.style.fontWeight = fontWeightInput.value;
  
  // Initialize quality badge
  qualityBadge.style.display = features.highQuality ? 'block' : 'none';
  qualityBadge.textContent = features.highQuality ? 'ULTRA HD 4√ó' : 'HD 2√ó';
  
  // Initialize all toggle switches
  toggleSwitches.forEach(toggle => {
    const feature = toggle.dataset.feature;
    if (features[feature]) {
      toggle.classList.add('active');
    } else {
      toggle.classList.remove('active');
    }
  });
  
  // Initialize template stats
  updateTemplateStat();
  
  // Show welcome message
  setTimeout(() => {
    showStatus('‚ú® Welcome to Bangla Text Image Generator PRO! Start by entering your text.', 'success');
  }, 1000);
}

// Initialize when page loads
window.addEventListener('DOMContentLoaded', initializeUI);
</script>
html>
